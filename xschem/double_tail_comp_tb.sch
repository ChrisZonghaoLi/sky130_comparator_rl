v {xschem version=3.4.1 file_version=1.2
}
G {}
K {}
V {}
S {}
E {}
N 1390 -290 1390 -270 {
lab=GND}
N 430 -290 430 -270 {
lab=GND}
N 140 -290 140 -270 {
lab=GND}
N 670 -290 670 -270 {
lab=GND}
N 670 -360 670 -350 {
lab=Vcm}
N 670 -470 670 -360 {
lab=Vcm}
N 670 -490 670 -470 {
lab=Vcm}
N 430 -510 430 -350 {
lab=Vclk}
N 430 -510 870 -510 {
lab=Vclk}
N 430 -450 870 -450 {
lab=Vclk}
N 140 -530 870 -530 {
lab=Vclk_bar}
N 140 -530 140 -350 {
lab=Vclk_bar}
N 1170 -470 1220 -470 {
lab=Di_n}
N 1170 -450 1220 -450 {
lab=Di_p}
N 1170 -530 1390 -530 {
lab=#net1}
N 1170 -490 1180 -490 {
lab=Vout_p}
N 1170 -510 1430 -510 {
lab=Vout_n}
N 1420 -530 1420 -510 {
lab=Vout_n}
N 1420 -530 1670 -530 {
lab=Vout_n}
N 1670 -530 1670 -510 {
lab=Vout_n}
N 1180 -490 1430 -490 {
lab=Vout_p}
N 1420 -490 1420 -470 {
lab=Vout_p}
N 1420 -470 1630 -470 {
lab=Vout_p}
N 2080 -490 2160 -490 {
lab=Q}
N 2080 -470 2160 -470 {
lab=Q_bar}
N 2100 -320 2100 -270 {
lab=GND}
N 2150 -320 2150 -270 {
lab=GND}
N 2100 -470 2100 -380 {
lab=Q_bar}
N 2150 -490 2150 -380 {
lab=Q}
N 2080 -550 2080 -510 {
lab=#net2}
N 1170 -430 1390 -430 {
lab=#net1}
N 1390 -670 1390 -650 {
lab=GND}
N 430 -670 430 -650 {
lab=GND}
N 140 -670 140 -650 {
lab=GND}
N 670 -670 670 -650 {
lab=GND}
N 670 -740 670 -730 {
lab=#net3}
N 810 -850 870 -850 {
lab=Vsc}
N 670 -850 670 -740 {
lab=#net3}
N 670 -870 870 -870 {
lab=#net3}
N 670 -870 670 -850 {
lab=#net3}
N 430 -890 430 -730 {
lab=#net4}
N 430 -890 870 -890 {
lab=#net4}
N 430 -830 870 -830 {
lab=#net4}
N 140 -910 870 -910 {
lab=#net5}
N 140 -910 140 -730 {
lab=#net5}
N 1170 -850 1220 -850 {
lab=Di_n_mc}
N 1170 -830 1220 -830 {
lab=Di_p_mc}
N 1390 -910 1390 -730 {
lab=#net6}
N 1170 -910 1390 -910 {
lab=#net6}
N 1170 -870 1180 -870 {
lab=Vout_p_mc}
N 1170 -890 1430 -890 {
lab=Vout_n_mc}
N 1180 -870 1430 -870 {
lab=Vout_p_mc}
N 1170 -810 1390 -810 {
lab=#net6}
N 790 -670 790 -650 {
lab=GND}
N 790 -850 810 -850 {
lab=Vsc}
N 790 -780 790 -730 {
lab=Vsc}
N 1390 -1060 1390 -1040 {
lab=GND}
N 430 -1060 430 -1040 {
lab=GND}
N 140 -1060 140 -1040 {
lab=GND}
N 670 -1060 670 -1040 {
lab=GND}
N 670 -1130 670 -1120 {
lab=#net7}
N 810 -1240 870 -1240 {
lab=#net8}
N 670 -1240 670 -1130 {
lab=#net7}
N 670 -1260 870 -1260 {
lab=#net7}
N 670 -1260 670 -1240 {
lab=#net7}
N 430 -1280 430 -1120 {
lab=#net9}
N 430 -1280 870 -1280 {
lab=#net9}
N 430 -1220 870 -1220 {
lab=#net9}
N 140 -1300 870 -1300 {
lab=#net10}
N 140 -1300 140 -1120 {
lab=#net10}
N 1170 -1240 1220 -1240 {
lab=Di_n_ms}
N 1170 -1220 1220 -1220 {
lab=Di_p_ms}
N 1390 -1300 1390 -1120 {
lab=#net11}
N 1170 -1300 1390 -1300 {
lab=#net11}
N 1170 -1260 1180 -1260 {
lab=Vout_p_ms}
N 1170 -1280 1430 -1280 {
lab=Vout_n_ms}
N 1180 -1260 1430 -1260 {
lab=Vout_p_ms}
N 1170 -1200 1390 -1200 {
lab=#net11}
N 790 -1240 810 -1240 {
lab=#net8}
N 670 -1240 700 -1240 {
lab=#net7}
N 760 -1240 790 -1240 {
lab=#net8}
N 790 -850 790 -780 {
lab=Vsc}
N 2150 -590 2150 -570 {
lab=GND}
N 2080 -650 2080 -550 {
lab=#net2}
N 2080 -650 2150 -650 {
lab=#net2}
N 1390 -360 1390 -350 {
lab=#net12}
N 1390 -530 1390 -420 {
lab=#net1}
N 1670 -510 1780 -510 {
lab=Vout_n}
N 1630 -470 1670 -470 {
lab=Vout_p}
N 1670 -490 1670 -470 {
lab=Vout_p}
N 1670 -490 1780 -490 {
lab=Vout_p}
N 670 -470 700 -470 {
lab=Vcm}
N 670 -490 770 -490 {
lab=Vcm}
N 760 -470 780 -470 {
lab=#net13}
N 770 -490 780 -490 {
lab=Vcm}
N 840 -470 870 -470 {
lab=#net13}
N 780 -490 870 -490 {
lab=Vcm}
N 780 -470 840 -470 {
lab=#net13}
N 1390 -1440 1390 -1420 {
lab=GND}
N 430 -1440 430 -1420 {
lab=GND}
N 140 -1440 140 -1420 {
lab=GND}
N 670 -1440 670 -1420 {
lab=GND}
N 670 -1510 670 -1500 {
lab=#net14}
N 670 -1620 670 -1510 {
lab=#net14}
N 670 -1640 670 -1620 {
lab=#net14}
N 430 -1660 430 -1500 {
lab=#net15}
N 430 -1660 870 -1660 {
lab=#net15}
N 430 -1600 870 -1600 {
lab=#net15}
N 140 -1680 870 -1680 {
lab=#net16}
N 140 -1680 140 -1500 {
lab=#net16}
N 1170 -1620 1220 -1620 {
lab=Di_n_kn}
N 1170 -1600 1220 -1600 {
lab=Di_p_kn}
N 1390 -1680 1390 -1500 {
lab=#net17}
N 1170 -1680 1390 -1680 {
lab=#net17}
N 1170 -1640 1180 -1640 {
lab=Vout_p_kn}
N 1170 -1660 1430 -1660 {
lab=Vout_n_kn}
N 1180 -1640 1430 -1640 {
lab=Vout_p_kn}
N 1170 -1580 1390 -1580 {
lab=#net17}
N 670 -1620 700 -1620 {
lab=#net14}
N 840 -1640 870 -1640 {
lab=Vn_kn}
N 760 -1620 780 -1620 {
lab=#net18}
N 840 -1620 870 -1620 {
lab=Vp_kn}
N 760 -1640 780 -1640 {
lab=#net14}
N 670 -1640 700 -1640 {
lab=#net14}
N 700 -1640 760 -1640 {
lab=#net14}
C {double_tail_comp.sym} 1020 -480 0 0 {name=x1}
C {devices/gnd.sym} 1390 -270 0 0 {name=l1 lab=GND}
C {devices/vsource.sym} 1390 -390 0 0 {name=VDD value=VDD}
C {devices/vsource.sym} 430 -320 0 0 {name=Vclk value="PULSE(0 VDD Tdelay Tr Tf Tclk_pk Tclk 0)"}
C {devices/gnd.sym} 430 -270 0 0 {name=l2 lab=GND}
C {devices/vsource.sym} 140 -320 0 0 {name=Vclk_bar value="PULSE(0 VDD Tdelay_bar Tr Tf Tclk_pk Tclk 0)"}
C {devices/gnd.sym} 140 -270 0 0 {name=Vclk_bar1 lab=GND
value="PULSE(3.3 0 0 10p 10p 100ns 400ns 0)"}
C {devices/vsource.sym} 670 -320 0 0 {name=Vcm value="dc Vcm"}
C {devices/gnd.sym} 670 -270 0 0 {name=l3 lab=GND}
C {devices/vsource.sym} 730 -470 1 0 {name=Vdiff value="dc Vin"}
C {devices/lab_pin.sym} 140 -390 0 0 {name=p2 sig_type=std_logic lab=Vclk_bar}
C {devices/lab_pin.sym} 430 -390 0 0 {name=p3 sig_type=std_logic lab=Vclk}
C {devices/lab_pin.sym} 670 -390 0 0 {name=p17 sig_type=std_logic lab=Vcm}
C {devices/opin.sym} 1220 -470 0 0 {name=p5 lab=Di_n}
C {devices/opin.sym} 1220 -450 0 0 {name=p4 lab=Di_p}
C {devices/opin.sym} 1430 -510 0 0 {name=p8 lab=Vout_n}
C {devices/opin.sym} 1430 -490 0 0 {name=p1 lab=Vout_p}
C {devices/opin.sym} 2160 -490 0 0 {name=p6 lab=Q}
C {devices/opin.sym} 2160 -470 0 0 {name=p7 lab=Q_bar}
C {devices/capa.sym} 2100 -350 0 0 {name=C2
m=1
value=10f
footprint=1206
device="ceramic capacitor"}
C {devices/gnd.sym} 2100 -270 0 0 {name=l7 lab=GND}
C {devices/capa.sym} 2150 -350 0 0 {name=C3
m=1
value=10f
footprint=1206
device="ceramic capacitor"}
C {devices/gnd.sym} 2150 -270 0 0 {name=l9 lab=GND}
C {sky130_fd_pr/corner.sym} 120 -60 0 0 {name=CORNER only_toplevel=false corner=tt}
C {RS_latch.sym} 1930 -490 0 0 {name=x2}
C {devices/code_shown.sym} 120 220 0 0 {name=s1 only_toplevel=false 
value="
*.OPTIONS maxord=1
*.OPTIONS itl1=200
*.OPTIONS itl2=200
*.OPTIONS itl4=200

* save all voltage and current
.save all 
.options savecurrents
.options seed=random

.nodeset V(Vout_n) = 0
.nodeset V(Vout_p) = 0
.nodeset V(Di_n) = 0
.nodeset V(Di_p) = 0
.nodeset V(Q) = 0
.nodeset V(Q_bar) = 0

.nodeset V(Vout_n_mc) = 0
.nodeset V(Vout_p_mc) = 0
.nodeset V(Di_n_mc) = 0
.nodeset V(Di_p_mc) = 0

.nodeset V(Vout_n_ms) = 0
.nodeset V(Vout_p_ms) = 0
.nodeset V(Di_n_ms) = 0
.nodeset V(Di_p_ms) = 0

.control
set filetype=ascii
set units=degrees

.include /autofs/fs1.ece/fs1.eecg.tcc/lizongh2/sky130_comparator/xschem/simulations/double_tail_comp_tb_vars.spice
.include /autofs/fs1.ece/fs1.eecg.tcc/lizongh2/sky130_comparator/xschem/simulations/double_tail_comp_tb_analyses.spice

.endc
"}
C {double_tail_comp.sym} 1020 -860 0 0 {name=x3}
C {devices/gnd.sym} 1390 -650 0 0 {name=l4 lab=GND}
C {devices/vsource.sym} 1390 -700 0 0 {name=VDD2 value=VDD}
C {devices/vsource.sym} 430 -700 0 0 {name=Vclk2 value="PULSE(0 VDD Tdelay Tr Tf Tclk_pk Tclk 0)"}
C {devices/gnd.sym} 430 -650 0 0 {name=l5 lab=GND}
C {devices/vsource.sym} 140 -700 0 0 {name=Vclk_bar2 value="PULSE(0 VDD Tdelay_bar Tr Tf Tclk_pk Tclk 0)"}
C {devices/gnd.sym} 140 -650 0 0 {name=Vclk_bar4 lab=GND
value="PULSE(3.3 0 0 10p 10p 100ns 400ns 0)"}
C {devices/vsource.sym} 670 -700 0 0 {name=Vcm2 value="dc Vcm"}
C {devices/gnd.sym} 670 -650 0 0 {name=l6 lab=GND}
C {devices/opin.sym} 1220 -850 0 0 {name=p12 lab=Di_n_mc}
C {devices/opin.sym} 1220 -830 0 0 {name=p13 lab=Di_p_mc}
C {devices/opin.sym} 1430 -890 0 0 {name=p14 lab=Vout_n_mc}
C {devices/opin.sym} 1430 -870 0 0 {name=p15 lab=Vout_p_mc}
C {devices/vsource.sym} 790 -700 0 0 {name=ASRC1 value=3 
format="@name \\\\%v([ @@p ]) filesrc"
device_model="
.model filesrc filesource (file=\\"staircase_voltage.txt\\" amploffset=[Vcm] amplscale=[1] timeoffset=0 timescale=1 timerelative=false amplstep=false)
"}
C {devices/gnd.sym} 790 -650 0 0 {name=l11 lab=GND}
C {devices/lab_pin.sym} 790 -780 0 1 {name=p19 sig_type=std_logic lab=Vsc}
C {double_tail_comp.sym} 1020 -1250 0 0 {name=x4}
C {devices/gnd.sym} 1390 -1040 0 0 {name=l8 lab=GND}
C {devices/vsource.sym} 1390 -1090 0 0 {name=VDD3 value=VDD}
C {devices/vsource.sym} 430 -1090 0 0 {name=Vclk3 value="PULSE(0 VDD Tdelay Tr Tf Tclk_pk Tclk 0)"}
C {devices/gnd.sym} 430 -1040 0 0 {name=l10 lab=GND}
C {devices/vsource.sym} 140 -1090 0 0 {name=Vclk_bar3 value="PULSE(0 VDD Tdelay_bar Tr Tf Tclk_pk Tclk 0)"}
C {devices/gnd.sym} 140 -1040 0 0 {name=Vclk_bar6 lab=GND
value="PULSE(3.3 0 0 10p 10p 100ns 400ns 0)"}
C {devices/vsource.sym} 670 -1090 0 0 {name=Vcm3 value="dc Vcm"}
C {devices/gnd.sym} 670 -1040 0 0 {name=l12 lab=GND}
C {devices/opin.sym} 1220 -1240 0 0 {name=p9 lab=Di_n_ms}
C {devices/opin.sym} 1220 -1220 0 0 {name=p10 lab=Di_p_ms}
C {devices/opin.sym} 1430 -1280 0 0 {name=p11 lab=Vout_n_ms}
C {devices/opin.sym} 1430 -1260 0 0 {name=p16 lab=Vout_p_ms}
C {devices/vsource.sym} 730 -1240 1 0 {name=Vdiff2 value="dc Vin_min"}
C {devices/gnd.sym} 2150 -570 0 0 {name=l13 lab=GND}
C {devices/vsource.sym} 2150 -620 0 0 {name=VDD_latch value=VDD}
C {devices/res.sym} 1390 -320 0 0 {name=Rdummy
value=1
footprint=1206
device=resistor
m=1}
C {double_tail_comp.sym} 1020 -1630 0 0 {name=x5}
C {devices/gnd.sym} 1390 -1420 0 0 {name=l14 lab=GND}
C {devices/vsource.sym} 1390 -1470 0 0 {name=VDD4 value=VDD}
C {devices/vsource.sym} 430 -1470 0 0 {name=Vclk4 value="PULSE(0 VDD Tdelay Tr Tf Tclk_pk Tclk 0)"}
C {devices/gnd.sym} 430 -1420 0 0 {name=l15 lab=GND}
C {devices/vsource.sym} 140 -1470 0 0 {name=Vclk_bar5 value="PULSE(0 VDD Tdelay_bar Tr Tf Tclk_pk Tclk 0)"}
C {devices/gnd.sym} 140 -1420 0 0 {name=Vclk_bar7 lab=GND
value="PULSE(3.3 0 0 10p 10p 100ns 400ns 0)"}
C {devices/vsource.sym} 670 -1470 0 0 {name=Vcm4 value="dc Vcm"}
C {devices/gnd.sym} 670 -1420 0 0 {name=l16 lab=GND}
C {devices/opin.sym} 1220 -1620 0 0 {name=p18 lab=Di_n_kn}
C {devices/opin.sym} 1220 -1600 0 0 {name=p20 lab=Di_p_kn}
C {devices/opin.sym} 1430 -1660 0 0 {name=p21 lab=Vout_n_kn}
C {devices/opin.sym} 1430 -1640 0 0 {name=p22 lab=Vout_p_kn}
C {devices/vsource.sym} 730 -1620 1 0 {name=Vdiff4 value="dc Vin"}
C {devices/res.sym} 810 -1640 3 0 {name=Rdummyn
value=8k
footprint=1206
device=resistor
m=1}
C {devices/res.sym} 810 -1620 3 0 {name=Rdummyp
value=8k
footprint=1206
device=resistor
m=1}
C {devices/lab_pin.sym} 850 -1640 3 1 {name=p23 sig_type=std_logic lab=Vn_kn}
C {devices/lab_pin.sym} 850 -1620 1 1 {name=p24 sig_type=std_logic lab=Vp_kn}
